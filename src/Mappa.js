import React, { useRef, useEffect, useState, useContext  } from "react";
import {GeoJSON, ImageOverlay, MapContainer, Marker, Polyline, Popup, TileLayer, useMapEvents} from "react-leaflet";
import "leaflet/dist/leaflet.css";
import "leaflet-routing-machine";
import 'leaflet-routing-machine/dist/leaflet-routing-machine.css';
import L from 'leaflet';
import { createControlComponent } from "@react-leaflet/core";
import 'leaflet-routing-machine/dist/leaflet-routing-machine.css';
import gh from 'graphhopper-js-api-client';
import {Button, colors} from "@mui/material";
import Navbar from'../src/components/navbar/navbar.jsx'
import SwipeableEdge from '../src/components/swipeableEdge/swipeableEdge'
import Select from '@mui/material/Select';
import InputLabel from '@mui/material/InputLabel';
import MenuItem from '@mui/material/MenuItem';
import Dialog from "../src/components/dialog/Dialog.jsx";
import 'leaflet.icon.glyph';
import scentifica from "./image/campus/BibliotecaScentifica.jpg";
import umanistica from "./image/campus/bibliotecaUmanistica.jpg";
import b from "./image/campus/edificioB.jpg";
import b1 from "./image/campus/edificioB1.jpg";
import b2 from "./image/campus/edificioB2.jpg";
import c from "./image/campus/edificioC.jpg";
import d from "./image/campus/edificioD.jpg";
import d3 from "./image/campus/edificioD3.jpg";
import e from "./image/campus/edificioE.jpg";
import e1 from "./image/campus/edificioE1.jpg";
import e2 from "./image/campus/edificioE2.jpg";
import f from "./image/campus/EdificioF.jpg";
import f1 from "./image/campus/edificioF1.jpg";
import f2 from "./image/campus/edificioF2.jpg";
import f3 from "./image/campus/edificioF3.jpg";
import piazzaDelSapere from "./image/piazze/piazzadelSapere.jpg";
import GiardinoTIF from './image/GiardinoREF.tif'
import giardinoFoto from './image/DJI_0014.JPG';
import './style.css';


var piazze= {
    "type": "FeatureCollection",
    "name": "piazzeUnisa",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
        { "type": "Feature", "properties": { "id": 130, "Nome": "Piazza del Sapere",FotoUrl: piazzaDelSapere, "Area": 6470, "Attrazioni": "Meridiana del Campus, Fontana" }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.792416698665365, 40.770978550950403 ], [ 14.792464426005443, 40.770977452313545 ], [ 14.792491698771201, 40.770969981582461 ], [ 14.792521872895016, 40.770959874121417 ], [ 14.792540441586597, 40.77094932720393 ], [ 14.792566553809124, 40.770930870094261 ], [ 14.792714523070147, 40.770765634788937 ], [ 14.79276500670038, 40.770668954366535 ], [ 14.792754561811364, 40.770567000314188 ], [ 14.792715103341759, 40.770502839494135 ], [ 14.792073903210667, 40.770217191255711 ], [ 14.792228255459419, 40.770010205380295 ], [ 14.792126127655736, 40.769970104538999 ], [ 14.791928545171896, 40.770046021453695 ], [ 14.791855430948804, 40.770126003290265 ], [ 14.791795082701174, 40.770100075123018 ], [ 14.791724289564529, 40.770196316913221 ], [ 14.791634347464694, 40.770189285554274 ], [ 14.791374966054194, 40.770247733702909 ], [ 14.791296629386594, 40.770366827139902 ], [ 14.791962926264903, 40.770644015189305 ], [ 14.791867616652658, 40.770758933082384 ], [ 14.792416698665365, 40.770978550950403 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 336, "Nome": "Piazza delle Scienze Matematiche Fisiche e Naturali", "Area": 1644, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.789542033100275, 40.774863436981391 ], [ 14.789565098896851, 40.774833775514352 ], [ 14.7895233193408, 40.774816198342464 ], [ 14.789617903613529, 40.774683929974827 ], [ 14.789315001832147, 40.774556495085768 ], [ 14.789223899189086, 40.774520901158141 ], [ 14.78915020469438, 40.774615598538901 ], [ 14.789172545151438, 40.774625046297878 ], [ 14.789105886450026, 40.77471458022633 ], [ 14.789083110789258, 40.774704583192452 ], [ 14.788983666741778, 40.774840037380727 ], [ 14.789425543574202, 40.775024377673411 ], [ 14.789542033100275, 40.774863436981391 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 54, "Nome": "Piazza Renato Cacciappoli", "Area": 354, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.789543121109567, 40.774864535553952 ], [ 14.789687753808821, 40.774924627447412 ], [ 14.789805621479982, 40.774763466798866 ], [ 14.789617976147497, 40.774684039832358 ], [ 14.789525042022005, 40.774815669654167 ], [ 14.789566241306515, 40.774833905970091 ], [ 14.789543121109567, 40.774864535553952 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 228, "Nome": "Piazza De Rosa", "Area": 3424, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.791339841491036, 40.769311588948376 ], [ 14.791394532090532, 40.769346856066505 ], [ 14.791439067936816, 40.769360369630171 ], [ 14.791318371441353, 40.76948122251634 ], [ 14.791309667367161, 40.769555931463309 ], [ 14.791327655787159, 40.769619653734075 ], [ 14.791390325121343, 40.769673707750329 ], [ 14.791463439344554, 40.769704030715793 ], [ 14.791548739271636, 40.76971325944168 ], [ 14.791625335124525, 40.76970490964213 ], [ 14.791686843915484, 40.769673268286958 ], [ 14.791718758854188, 40.769656129213274 ], [ 14.791827269645788, 40.769522532179764 ], [ 14.791851641053524, 40.769530442537913 ], [ 14.792070983723166, 40.769217543208569 ], [ 14.792148740119279, 40.769249184780755 ], [ 14.792191680218629, 40.769199085617842 ], [ 14.79153365220971, 40.768937163063498 ], [ 14.791493033196813, 40.768999567524155 ], [ 14.791559184160674, 40.769025056653192 ], [ 14.791339841491036, 40.769311588948376 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 124, "Nome": "Piazza della Scienza e della Tecnica \"Giulio Natta\"", "Area": 2802, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.789849994125147, 40.773662157571458 ], [ 14.789931812422552, 40.773558450361072 ], [ 14.789999123929636, 40.773585695491349 ], [ 14.790238776105724, 40.773248646077874 ], [ 14.789656183406466, 40.773013984850792 ], [ 14.78944148290973, 40.773321593032023 ], [ 14.789561018861964, 40.773381356742007 ], [ 14.789505312787135, 40.773465728946945 ], [ 14.789477459749721, 40.773453424673725 ], [ 14.78945192779876, 40.773490776924646 ], [ 14.789849994125147, 40.773662157571458 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 47, "Nome": "Piazza Renato Maria Capocelli", "Area": 916, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.788976395212062, 40.775111624668654 ], [ 14.789025428163344, 40.775048566806532 ], [ 14.788889064334334, 40.774991221451373 ], [ 14.788865273198208, 40.775027254553876 ], [ 14.788763725665966, 40.774986607455119 ], [ 14.788589934317935, 40.775224777128315 ], [ 14.788771704400641, 40.775302775313556 ], [ 14.788815224771604, 40.775248286450129 ], [ 14.788968126341576, 40.775313980679122 ], [ 14.789084470799946, 40.775157984243393 ], [ 14.788976395212062, 40.775111624668654 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 165, "Nome": "Piazza della Politica", "Area": 297, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.79192315952977, 40.771088325273865 ], [ 14.792051979827814, 40.771139741373403 ], [ 14.792187183113599, 40.770952973300233 ], [ 14.79205488118588, 40.770898041414107 ], [ 14.79192315952977, 40.771088325273865 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 108, "Nome": "Piazza della Costituzione Italiana", "Area": 550, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.792737280602529, 40.769892560147177 ], [ 14.79298331576636, 40.770001546614111 ], [ 14.793121420410204, 40.769826640826388 ], [ 14.7928719036167, 40.769715017294061 ], [ 14.792737280602529, 40.769892560147177 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 334, "Nome": "Piazza Pomponio Leto", "Area": 473, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.791713246273826, 40.771434064818472 ], [ 14.791526979086116, 40.771697076155696 ], [ 14.791683652421574, 40.771757720226098 ], [ 14.79173239523705, 40.771752446830867 ], [ 14.791818565571552, 40.771478229702225 ], [ 14.791713246273826, 40.771434064818472 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 185, "Nome": "Piazza dell'Economia", "Area": 236, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.792874369771047, 40.771372761274463 ], [ 14.793002754865382, 40.771425825098113 ], [ 14.793117648644719, 40.771287397643192 ], [ 14.792980994679905, 40.771226093963868 ], [ 14.792874369771047, 40.771372761274463 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 329, "Nome": "Piazza Primo Levi", "Area": 535, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.788924025698988, 40.77273691654846 ], [ 14.789042401107997, 40.772781739730419 ], [ 14.789309616185689, 40.772398434631803 ], [ 14.78919385199894, 40.772352952022771 ], [ 14.788924025698988, 40.77273691654846 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 291, "Nome": "Piazza dell'Industria", "Area": 448, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.789620351634353, 40.772828210791552 ], [ 14.789679539338854, 40.77285259984609 ], [ 14.789798785155286, 40.772674625458578 ], [ 14.789439306891156, 40.772523676437764 ], [ 14.789620351634353, 40.772828210791552 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 53, "Nome": "Piazza delle Costruzioni", "Area": 305, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.790911601040742, 40.772906980813865 ], [ 14.791116146784253, 40.772990035296907 ], [ 14.791205363544721, 40.772868090186904 ], [ 14.791002123412339, 40.772783717223042 ], [ 14.790911601040742, 40.772906980813865 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 353, "Nome": "Piazza Mario Napoli", "Area": 492, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.792278575892599, 40.772201343101173 ], [ 14.792380848764351, 40.772245177890142 ], [ 14.79233297635629, 40.772317027331326 ], [ 14.792463537469171, 40.772374374994662 ], [ 14.792614117952704, 40.77217827214799 ], [ 14.792375191116131, 40.772075111930789 ], [ 14.792278575892599, 40.772201343101173 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 46, "Nome": "Piazza della Società", "Area": 523, "Attrazioni": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.793397484629979, 40.771094917083715 ], [ 14.793535009002218, 40.770911664526089 ], [ 14.793402707074495, 40.770852338050219 ], [ 14.793392262185467, 40.770868817632156 ], [ 14.793286942887743, 40.770823333976061 ], [ 14.793160733811959, 40.770994062321378 ], [ 14.793397484629979, 40.771094917083715 ] ] ] ] } }
    ]
};
// Cambia il colore delle piazze
piazze.features.forEach(piazza => {
    // Imposta il colore del contorno di ciascun poligono della piazza
    piazza.properties.stroke = "#FF0000"; // Rosso
    piazza.properties['stroke-width'] = 2; // Larghezza del contorno

    // Imposta il colore di riempimento di ciascun poligono della piazza
    piazza.properties.fill = "#00FF00"; // Verde
});
var edifici= {
    "type": "FeatureCollection",
    "name": "edifici",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
        { "type": "Feature", "properties": { "id": 328, "Nome": "F3",FotoUrl: f3,"Tipologia": null, "Note": null, "Area": 1086 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.789036573025902, 40.775221161202765 ], [ 14.789254996422033, 40.775310476994783 ], [ 14.789451978169794, 40.775035703307687 ], [ 14.789078856355539, 40.774879149786578 ], [ 14.788980576183942, 40.775029212704695 ], [ 14.789024916540431, 40.775046520977945 ], [ 14.788977376364402, 40.775111946210103 ], [ 14.789084798877543, 40.775157639984812 ], [ 14.789036573025902, 40.775221161202765 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 190, "Nome": "H", "Tipologia": null, "Note": null, "Area": 613 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.788564749636311, 40.775840105871197 ], [ 14.788682457283548, 40.775938588683651 ], [ 14.788960613024679, 40.775746296096862 ], [ 14.788807478804008, 40.775618735360943 ], [ 14.788713084127684, 40.775680179165256 ], [ 14.788617775217201, 40.775680871489499 ], [ 14.788610461343975, 40.775802028119003 ], [ 14.788564749636311, 40.775840105871197 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 150, "Nome": "F2",FotoUrl: f2, "Tipologia": null, "Note": null, "Area": 2258 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.789315564434688, 40.774557046680506 ], [ 14.789805593940846, 40.774762670136404 ], [ 14.790083521123435, 40.774388808834118 ], [ 14.789594405851439, 40.774181799541431 ], [ 14.789315564434688, 40.774557046680506 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 387, "Nome": "F1",FotoUrl: f1, "Tipologia": null, "Note": null, "Area": 1603 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.78858509134623, 40.773678985822556 ], [ 14.788994668246891, 40.773849302496359 ], [ 14.789232369126742, 40.773534977887792 ], [ 14.78881730682116, 40.773360506317914 ], [ 14.78858509134623, 40.773678985822556 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 338, "Nome": "E1", FotoUrl: e1,"Tipologia": null, "Note": null, "Area": 1287 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.790315622319101, 40.772863398300849 ], [ 14.790360076954803, 40.772803596232713 ], [ 14.790254482910097, 40.772757684478165 ], [ 14.790294937771383, 40.772701084458113 ], [ 14.790060665269602, 40.772601904490202 ], [ 14.789840220559393, 40.772903684613055 ], [ 14.790226713047685, 40.773065521969222 ], [ 14.7903604197926, 40.772883866000647 ], [ 14.790315622319101, 40.772863398300849 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 242, "Nome": "Biblioteca Scientifica", FotoUrl: scentifica, "Tipologia": null, "Note": null, "Area": 1849 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.788412872487593, 40.772517783144842 ], [ 14.788803250471039, 40.772679794529836 ], [ 14.78884987641286, 40.772617482505439 ], [ 14.788912958569433, 40.772640330254497 ], [ 14.788936728657415, 40.7726091742311 ], [ 14.788993411174921, 40.772632714339011 ], [ 14.789100376570852, 40.772486627063977 ], [ 14.789047350989966, 40.772462394546537 ], [ 14.789076606482871, 40.772423622500241 ], [ 14.789008953155527, 40.77239454345068 ], [ 14.789044608287503, 40.772348155416701 ], [ 14.788655144538213, 40.772187527944318 ], [ 14.788412872487593, 40.772517783144842 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 145, "Nome": "Osservatorio dell'Appennino meridionale", "Tipologia": null, "Note": null, "Area": 263 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.786344417715814, 40.773849518853631 ], [ 14.786496637702335, 40.773848480338664 ], [ 14.786498009053563, 40.773809362929363 ], [ 14.786602231747038, 40.773809362929363 ], [ 14.786600403278729, 40.773710703874414 ], [ 14.78648840959495, 40.773712088563911 ], [ 14.786487952477877, 40.773733551247538 ], [ 14.786343960598737, 40.77373424359206 ], [ 14.786344417715814, 40.773849518853631 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 188, "Nome": "Osservatorio dell'Appennino Meridionale 2", "Tipologia": null, "Note": null, "Area": 265 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.786482467072961, 40.773622776031786 ], [ 14.786481552838804, 40.773670547866224 ], [ 14.786591260937199, 40.773668470830664 ], [ 14.78658668976643, 40.773504384815773 ], [ 14.786357216993963, 40.773507154203358 ], [ 14.786359045462268, 40.773593697507053 ], [ 14.7864797243705, 40.773590235777057 ], [ 14.786482467072961, 40.773622776031786 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 12, "Nome": "I1", "Tipologia": null, "Note": null, "Area": 999 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.786895700910236, 40.776302099769104 ], [ 14.786851817670877, 40.776522429529095 ], [ 14.787016836935548, 40.776540083570943 ], [ 14.78708403314581, 40.77620032898124 ], [ 14.787020036755081, 40.776192021154934 ], [ 14.787057520355365, 40.776003017825929 ], [ 14.786865531183176, 40.775982248196563 ], [ 14.786830790285354, 40.776168482308101 ], [ 14.78679056398261, 40.776162943754692 ], [ 14.786773193533699, 40.776254329826862 ], [ 14.786883815866245, 40.776266791554235 ], [ 14.786877416227172, 40.776297945862439 ], [ 14.786895700910236, 40.776302099769104 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 146, "Nome": "E2",FotoUrl: e2, "Tipologia": null, "Note": null, "Area": 1097 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.791385276278406, 40.772229588839366 ], [ 14.791448586993521, 40.772255206161589 ], [ 14.791413617537156, 40.77230505605759 ], [ 14.79161269202403, 40.7723877929552 ], [ 14.791828451284204, 40.772089731933107 ], [ 14.791445387173985, 40.771930488562617 ], [ 14.791354877992809, 40.772052344393451 ], [ 14.791479213837656, 40.772102886803175 ], [ 14.791385276278406, 40.772229588839366 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 158, "Nome": "D3",FotoUrl: d3, "Tipologia": null, "Note": null, "Area": 1557 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.790431044380927, 40.771775399000163 ], [ 14.790678744696837, 40.771875748565861 ], [ 14.79074022694364, 40.771798723039517 ], [ 14.790814737027127, 40.771830398716212 ], [ 14.790895646749693, 40.771710619575181 ], [ 14.790972442418569, 40.77174281456783 ], [ 14.791104834951888, 40.771563794632662 ], [ 14.790717713927618, 40.771400612154068 ], [ 14.790431044380927, 40.771775399000163 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 309, "Nome": "D2", "Tipologia": null, "Note": null, "Area": 1533 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.791456757961267, 40.770886353214358 ], [ 14.791486013454172, 40.770846195499196 ], [ 14.791252883745086, 40.770747878232029 ], [ 14.791126719431935, 40.770911971054453 ], [ 14.791204429334964, 40.770944512620872 ], [ 14.791084207543811, 40.771102892889495 ], [ 14.791450815439271, 40.771263522983979 ], [ 14.791595264435488, 40.771073813261907 ], [ 14.7916615464116, 40.770978265824503 ], [ 14.791456757961267, 40.770886353214358 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 197, "Nome": "B2",FotoUrl: b2, "Tipologia": null, "Note": null, "Area": 1817 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.792249856089223, 40.770175800402477 ], [ 14.79252595480351, 40.770296967070976 ], [ 14.792597265067462, 40.770200033753852 ], [ 14.792675889204645, 40.770236037573873 ], [ 14.792730743253841, 40.770168876586169 ], [ 14.792823995137477, 40.770213881379242 ], [ 14.792984214672833, 40.770001320011673 ], [ 14.792531668766964, 40.769802432578871 ], [ 14.792249856089223, 40.770175800402477 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 265, "Nome": "A1", "Tipologia": null, "Note": null, "Area": 4138 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.791551152637576, 40.768943522834157 ], [ 14.792099578850269, 40.769161626723026 ], [ 14.792381505807283, 40.768651158641134 ], [ 14.791701087038714, 40.768363293765077 ], [ 14.791383847787531, 40.768809890573984 ], [ 14.791588636237861, 40.768890900836325 ], [ 14.791551152637576, 40.768943522834157 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 307, "Nome": "B1",FotoUrl: b1, "Tipologia": null, "Note": null, "Area": 1620 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.793006499130311, 40.769605448616488 ], [ 14.793391391708836, 40.76976746710266 ], [ 14.79361172213977, 40.769471125298516 ], [ 14.793401448284522, 40.769385961404716 ], [ 14.793432075128656, 40.769348918538789 ], [ 14.793201231004955, 40.769248521882474 ], [ 14.793043068496441, 40.769460393269121 ], [ 14.793098836779791, 40.769486704047772 ], [ 14.793006499130311, 40.769605448616488 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 279, "Nome": "A2", "Tipologia": null, "Note": null, "Area": 1791 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.791988499400643, 40.769685765522262 ], [ 14.792017754893541, 40.769783218878857 ], [ 14.792513269804614, 40.769682130491987 ], [ 14.792609264390711, 40.769555423598106 ], [ 14.792562638448894, 40.769443949027185 ], [ 14.792493156653245, 40.769425254515625 ], [ 14.792473957736023, 40.769369863339364 ], [ 14.792211115416961, 40.769278121602113 ], [ 14.7920890651575, 40.769465586186804 ], [ 14.79210415002103, 40.769520284894853 ], [ 14.792051581557214, 40.769526516390378 ], [ 14.7920675806549, 40.769600948097349 ], [ 14.792018669127696, 40.769618257784693 ], [ 14.792027811469234, 40.769644914694396 ], [ 14.791988499400643, 40.769685765522262 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 161, "Nome": "C1", "Tipologia": null, "Note": null, "Area": 1158 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.793470115000348, 40.770862870156691 ], [ 14.793644696316031, 40.770935041063026 ], [ 14.79373774082676, 40.770808501562264 ], [ 14.793798678428853, 40.770834553832117 ], [ 14.793817352855299, 40.77080372531168 ], [ 14.793761657197473, 40.770779161731824 ], [ 14.793866864656994, 40.770637424736421 ], [ 14.793498290450783, 40.770480118027777 ], [ 14.79336781518178, 40.770657801386541 ], [ 14.793446567203839, 40.770693282174847 ], [ 14.793413026951077, 40.770738191397257 ], [ 14.793479288402812, 40.770766104572658 ], [ 14.793470196905732, 40.770777455927309 ], [ 14.793518602984818, 40.770797367315225 ], [ 14.793470115000348, 40.770862870156691 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 148, "Nome": "C2","Tipologia": null, "Note": null, "Area": 1318 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.792676738545147, 40.771604703938216 ], [ 14.792756022952167, 40.771637454969067 ], [ 14.792710811182875, 40.771700475846671 ], [ 14.792766506840705, 40.771722806064567 ], [ 14.792748160035769, 40.771746624955362 ], [ 14.792792716562035, 40.771766474024503 ], [ 14.792752746737005, 40.771821555160315 ], [ 14.792933593814187, 40.771897973957806 ], [ 14.793025327838842, 40.771771436290862 ], [ 14.793075781552405, 40.771794262711346 ], [ 14.793231074151285, 40.771584854820745 ], [ 14.793007308655428, 40.771491563889242 ], [ 14.792982081798646, 40.771521089490783 ], [ 14.792796975641753, 40.771441692885418 ], [ 14.792676738545147, 40.771604703938216 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 92, "Nome": "D1", "Tipologia": null, "Note": null, "Area": 1091 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.792022478376436, 40.771519383705332 ], [ 14.792192350132812, 40.771589103772982 ], [ 14.79241300322426, 40.771291614433537 ], [ 14.792066379659664, 40.771144233900429 ], [ 14.79193467580998, 40.771322380698848 ], [ 14.791985784766574, 40.771344214814 ], [ 14.791947125427608, 40.771391356629032 ], [ 14.792072276846966, 40.771448422991966 ], [ 14.792022478376436, 40.771519383705332 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 361, "Nome": "Piscina", "Tipologia": null, "Note": null, "Area": 2126 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.787145013047569, 40.772408619226539 ], [ 14.787288511271857, 40.772207152846484 ], [ 14.787521777791699, 40.772302923886585 ], [ 14.787716384972587, 40.772027354337872 ], [ 14.787324003602821, 40.771866205169154 ], [ 14.787196504229248, 40.772044350031926 ], [ 14.787078123654553, 40.771996877863543 ], [ 14.786867763338991, 40.772293247544376 ], [ 14.787145013047569, 40.772408619226539 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 397, "Nome": "Laboratorio", "Tipologia": null, "Note": null, "Area": 1498 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.790064584892669, 40.770957692021263 ], [ 14.790403563955376, 40.770475434797177 ], [ 14.790144961371457, 40.770370067206677 ], [ 14.789807074380468, 40.770854227423833 ], [ 14.789869431675838, 40.770880031559159 ], [ 14.789872707891007, 40.770880114264685 ], [ 14.789875874899003, 40.770879535325875 ], [ 14.789886577201882, 40.770879948853612 ], [ 14.789895532190011, 40.770880362381327 ], [ 14.789902521449033, 40.770882843547653 ], [ 14.78990721735744, 40.770885076597253 ], [ 14.789910711986954, 40.770887144235701 ], [ 14.78991311454474, 40.770889046463033 ], [ 14.789915189481016, 40.770890700573702 ], [ 14.789916609174256, 40.770892602800927 ], [ 14.789918465696186, 40.7708948358502 ], [ 14.78992010380377, 40.770897647838062 ], [ 14.789920431425287, 40.770900459825832 ], [ 14.790064584892669, 40.770957692021263 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 159, "Nome": "Laboratorio", "Tipologia": null, "Note": null, "Area": 817 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.789760333710747, 40.770544577018491 ], [ 14.789946422732289, 40.7702905038133 ], [ 14.789681704546725, 40.770181331434543 ], [ 14.789498236497318, 40.770437720827914 ], [ 14.789760333710747, 40.770544577018491 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 385, "Nome": "Laboratorio", "Tipologia": null, "Note": null, "Area": 437 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.788982259910167, 40.770210630175782 ], [ 14.789243483466221, 40.770313186006632 ], [ 14.789341333092572, 40.770176224313204 ], [ 14.789073993934871, 40.770069698356487 ], [ 14.788982259910167, 40.770210630175782 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 162, "Nome": "Laboratorio", "Tipologia": null, "Note": null, "Area": 924 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.788626462942926, 40.770629123135762 ], [ 14.788925253766237, 40.770755497566803 ], [ 14.789110469130398, 40.770506718352991 ], [ 14.788810804649707, 40.77037703520201 ], [ 14.788626462942926, 40.770629123135762 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 68, "Nome": "Laboratorio", "Tipologia": null, "Note": null, "Area": 408 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.789266416972389, 40.770759467440328 ], [ 14.789531135157956, 40.770864999824468 ], [ 14.789620685039216, 40.770735979018539 ], [ 14.789356403682342, 40.770631108076337 ], [ 14.789266416972389, 40.770759467440328 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 16, "Nome": "Mensa", "Tipologia": null, "Note": null, "Area": 5726 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.793248219680303, 40.773158054738381 ], [ 14.793730041724334, 40.773353563657864 ], [ 14.793858469358916, 40.773176249332167 ], [ 14.794171238700281, 40.773302618918706 ], [ 14.794413241794013, 40.772966184173448 ], [ 14.794122750715797, 40.772845437758008 ], [ 14.79426472003974, 40.772646950022931 ], [ 14.793762803876012, 40.772437214005194 ], [ 14.793527790041299, 40.772759757291766 ], [ 14.793491096431421, 40.772702857461638 ], [ 14.793346069306651, 40.77273593876415 ], [ 14.793426445785437, 40.772903991526604 ], [ 14.793248219680303, 40.773158054738381 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 104, "Nome": "Chiostro della pace", "Tipologia": null, "Note": null, "Area": 796 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.792416716270688, 40.769173153258222 ], [ 14.79266483496607, 40.769271740728129 ], [ 14.792857039589252, 40.769011046026627 ], [ 14.792606299921736, 40.768907826522067 ], [ 14.792416716270688, 40.769173153258222 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 82, "Nome": "D",FotoUrl: d, "Tipologia": null, "Note": null, "Area": 3415 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.790933682871344, 40.771938178563104 ], [ 14.791226358093011, 40.772063558055557 ], [ 14.79126436218896, 40.772013935593428 ], [ 14.791291445567676, 40.772025844987709 ], [ 14.791482776533488, 40.771758379326585 ], [ 14.791560532040137, 40.771792122734645 ], [ 14.791605525395113, 40.771731583078562 ], [ 14.791522746358538, 40.77169734341259 ], [ 14.791711565559375, 40.771432771099178 ], [ 14.791798931297182, 40.771467837949636 ], [ 14.791847200867325, 40.771394230624246 ], [ 14.791762892930343, 40.771358667505254 ], [ 14.791822301632051, 40.771274970043066 ], [ 14.791896125680498, 40.771307059596367 ], [ 14.791929761489559, 40.771260744772214 ], [ 14.791861179385377, 40.771227331914758 ], [ 14.791872973759983, 40.771197888887819 ], [ 14.791595587542433, 40.771073831046735 ], [ 14.790933682871344, 40.771938178563104 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 56, "Nome": "Edisu", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.794075900838873, 40.770646574069545 ], [ 14.794282957637483, 40.770659807002055 ], [ 14.79428033666535, 40.770704798952863 ], [ 14.794459436427864, 40.770712738705718 ], [ 14.794467299344264, 40.770664438527803 ], [ 14.79442711110487, 40.770665100174305 ], [ 14.794439342308161, 40.770553943468201 ], [ 14.794087258384785, 40.770531447445535 ], [ 14.794075900838873, 40.770646574069545 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 114, "Nome": "Residenze", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.795239612466526, 40.770843744490982 ], [ 14.795302515797747, 40.770841097912012 ], [ 14.79538900787818, 40.77089138289432 ], [ 14.795494720420933, 40.770800075924598 ], [ 14.79538551324867, 40.770716046935796 ], [ 14.79531037871415, 40.770773610112812 ], [ 14.795305136769883, 40.77062870960647 ], [ 14.795380271304403, 40.770680318042224 ], [ 14.795486857504532, 40.770591657371469 ], [ 14.795372408387998, 40.770504981526756 ], [ 14.795294652881346, 40.770569823009026 ], [ 14.795296400196102, 40.770416320622047 ], [ 14.79537590301751, 40.770465282628834 ], [ 14.795482489217635, 40.770371328475903 ], [ 14.795364545471591, 40.770291268846407 ], [ 14.795231749550119, 40.770385223112527 ], [ 14.795238738809147, 40.770551958525324 ], [ 14.795189813995972, 40.770553281820575 ], [ 14.795189813995972, 40.770649882302912 ], [ 14.795237865151764, 40.77064855900958 ], [ 14.795239612466526, 40.770843744490982 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 78, "Nome": "Residenze", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.795271937789504, 40.771178535879855 ], [ 14.795209908115661, 40.771177874238475 ], [ 14.79514613112706, 40.771132882607979 ], [ 14.795048281500708, 40.771221542556567 ], [ 14.795134773581141, 40.771275797093622 ], [ 14.795203792514013, 40.771224850761307 ], [ 14.795352314268293, 40.771220880915585 ], [ 14.795424827830676, 40.771271165610479 ], [ 14.795514814540622, 40.771203678248092 ], [ 14.795409101997869, 40.771129574398657 ], [ 14.795352314268293, 40.771172581107045 ], [ 14.795318241630547, 40.77117721259706 ], [ 14.795317367973169, 40.771041575970123 ], [ 14.795353187925667, 40.771039591041813 ], [ 14.795409975655247, 40.771075981384627 ], [ 14.795438806348727, 40.771069364960134 ], [ 14.795499962365193, 40.771019080112531 ], [ 14.795390755192928, 40.77094232948231 ], [ 14.795348819638779, 40.770985997955208 ], [ 14.795210781773037, 40.770987321241812 ], [ 14.795151373071327, 40.770945637700954 ], [ 14.795050028815462, 40.771030328042279 ], [ 14.795133899923766, 40.771084582735476 ], [ 14.795183698394316, 40.771050177325421 ], [ 14.795183698394316, 40.771089875873898 ], [ 14.795266695845237, 40.771090537516173 ], [ 14.795271937789504, 40.771178535879855 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 351, "Nome": "Residenze", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.795333093805974, 40.771878548787456 ], [ 14.795416964914271, 40.771878548787456 ], [ 14.795412159798691, 40.77144319191045 ], [ 14.795350566953534, 40.77144153781353 ], [ 14.795437495862654, 40.771375704722793 ], [ 14.795382892276523, 40.771336667984905 ], [ 14.795357119383871, 40.771365449310814 ], [ 14.795281984849352, 40.771365780130587 ], [ 14.79528668075776, 40.771684896379895 ], [ 14.795323374367641, 40.771684896379895 ], [ 14.795333093805974, 40.771878548787456 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 157, "Nome": "Residenze", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.795340847515199, 40.771983293704572 ], [ 14.795322500710261, 40.771688204561578 ], [ 14.795015846970545, 40.771698129105616 ], [ 14.794791317024369, 40.771993879837815 ], [ 14.795153011178908, 40.771903236017302 ], [ 14.795340847515199, 40.771983293704572 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 83, "Nome": "Presidio Sanitario e Poste", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.789438855097361, 40.769186179715007 ], [ 14.789692434151355, 40.769185600761432 ], [ 14.789694181466112, 40.769071133268532 ], [ 14.78944082082646, 40.769067824956558 ], [ 14.789438855097361, 40.769186179715007 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 380, "Nome": "Unicredit Bank", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.7894390735117, 40.769253751834079 ], [ 14.789435578882193, 40.769390715428877 ], [ 14.789657487856228, 40.769395347043087 ], [ 14.789659235170989, 40.769255075155179 ], [ 14.789595458182385, 40.769254413494629 ], [ 14.789593710867631, 40.769335797692868 ], [ 14.789508966101954, 40.769337121012349 ], [ 14.789511587074088, 40.769255736815722 ], [ 14.7894390735117, 40.769253751834079 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 353, "Nome": "F",FotoUrl: f, "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.788037080538833, 40.77544042540859 ], [ 14.78833345426507, 40.775573900687291 ], [ 14.789763098451116, 40.773626782884421 ], [ 14.789450186983915, 40.773491985379501 ], [ 14.788037080538833, 40.77544042540859 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 268, "Nome": "E", FotoUrl: e, "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.790001154880265, 40.773586244788213 ], [ 14.789931522286734, 40.773560208111761 ], [ 14.789875598610051, 40.773634692753966 ], [ 14.790278597245145, 40.773777070244741 ], [ 14.791345716741088, 40.772311094811634 ], [ 14.791328308592705, 40.772301866446561 ], [ 14.791389237112044, 40.772226721140456 ], [ 14.791478889076226, 40.772102137945694 ], [ 14.791264768851104, 40.772013808978265 ], [ 14.791224730109819, 40.77206456519032 ], [ 14.791179468924021, 40.772044130875834 ], [ 14.790001154880265, 40.773586244788213 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 273, "Nome": "C", FotoUrl: c,"Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.791914092785827, 40.772131141460569 ], [ 14.79220176243787, 40.772253747093664 ], [ 14.792332323550756, 40.772110047996748 ], [ 14.792819316501797, 40.77140868647647 ], [ 14.792838030261311, 40.771414289487879 ], [ 14.792851521576306, 40.77140044675297 ], [ 14.792850651168889, 40.771385285659044 ], [ 14.792860225650502, 40.771377045932617 ], [ 14.792870235335823, 40.771372761274485 ], [ 14.793338514527353, 40.770753790064923 ], [ 14.793303698230584, 40.77073928800791 ], [ 14.793415110380241, 40.770590971334158 ], [ 14.793232324822212, 40.770513187346253 ], [ 14.7932227503406, 40.770528348639168 ], [ 14.793200119747702, 40.770519120026499 ], [ 14.793170525895446, 40.77055998958717 ], [ 14.793087837190624, 40.77052834866992 ], [ 14.791949344286309, 40.772084999498524 ], [ 14.791914092785827, 40.772131141460569 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 196, "Nome": "B",FotoUrl: b, "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.793524509712757, 40.769590607922147 ], [ 14.792892593926416, 40.770444096301844 ], [ 14.793170036291285, 40.770560772370885 ], [ 14.79319984774539, 40.77051891403071 ], [ 14.793222913542001, 40.770528801829975 ], [ 14.793232488023612, 40.77051314614711 ], [ 14.793234881644016, 40.77051364053716 ], [ 14.793707948076355, 40.769857416917482 ], [ 14.793691192733533, 40.769850000993245 ], [ 14.793797164836819, 40.769706296697763 ], [ 14.793524509712757, 40.769590607922147 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 352, "Nome": "Residenze", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.795035101788784, 40.771666877695175 ], [ 14.794937616157835, 40.771624690463952 ], [ 14.794320062093915, 40.772444040803691 ], [ 14.79436662889084, 40.772464804578853 ], [ 14.794308746797466, 40.772543410240338 ], [ 14.794364888076002, 40.77256730502468 ], [ 14.794389259483738, 40.772535665032557 ], [ 14.794640807227898, 40.772645745773531 ], [ 14.794619699847983, 40.77266980531239 ], [ 14.794667572256039, 40.772690733808275 ], [ 14.794721755117873, 40.772618719979761 ], [ 14.794774632368599, 40.7726360230807 ], [ 14.795285779125519, 40.771960869219079 ], [ 14.795195256753921, 40.771923955556545 ], [ 14.794707828599169, 40.772562031693717 ], [ 14.794448447188245, 40.772451291646554 ], [ 14.795035101788784, 40.771666877695175 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 395, "Nome": "Laboratorio Modelli", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.789805476412363, 40.773032839625451 ], [ 14.790110989416506, 40.77316071687747 ], [ 14.790151898565208, 40.773106665697881 ], [ 14.789845515153649, 40.772979447504085 ], [ 14.789805476412363, 40.773032839625451 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 278, "Nome": "Masseria", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.790883476001051, 40.774839577353539 ], [ 14.791037538114251, 40.774802665290366 ], [ 14.790996193761844, 40.774701157010881 ], [ 14.790843002056059, 40.774736750840816 ], [ 14.790883476001051, 40.774839577353539 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 195, "Nome": "Masseria", "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.790769452629144, 40.774735762123584 ], [ 14.790834297981869, 40.774721260935678 ], [ 14.790807750555588, 40.774648095803052 ], [ 14.790741164388015, 40.774662267434145 ], [ 14.790769452629144, 40.774735762123584 ] ] ] ] } },
        { "type": "Feature", "properties": { "id": 266, "Nome": "Bibllioteca umanistica",FotoUrl: umanistica, "Tipologia": null, "Note": null, "Area": null }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.79057578697836, 40.76870991639521 ], [ 14.790331202493567, 40.76904742829997 ], [ 14.790446096272904, 40.769095549974892 ], [ 14.790386038160978, 40.769185201221518 ], [ 14.790463504421282, 40.769218820407829 ], [ 14.790527044162886, 40.7691205996001 ], [ 14.79063497468287, 40.769162788421198 ], [ 14.790681976683508, 40.769093572372498 ], [ 14.790749868462203, 40.769124554803199 ], [ 14.790659346090603, 40.769249802780131 ], [ 14.790721145017368, 40.769274193148171 ], [ 14.790734201128657, 40.769251121178634 ], [ 14.790756831721556, 40.769261668365701 ], [ 14.790776851092199, 40.769237937192443 ], [ 14.79087085509347, 40.769280125939055 ], [ 14.790854317352506, 40.769304516295968 ], [ 14.790879559167658, 40.769313745077312 ], [ 14.790864762241537, 40.769333521033062 ], [ 14.790918727501529, 40.769355933775799 ], [ 14.790943098909262, 40.769320007463953 ], [ 14.790997064169252, 40.76933978341782 ], [ 14.790981832039419, 40.769360877762146 ], [ 14.79109128577238, 40.769408010413535 ], [ 14.791112610754155, 40.769379829706423 ], [ 14.791151343884309, 40.769395156057399 ], [ 14.791217494848167, 40.769304845895334 ], [ 14.791191817829295, 40.769293804316007 ], [ 14.791210966792519, 40.769268919555856 ], [ 14.791240560644773, 40.7692821035359 ], [ 14.79129289389086, 40.769369941736173 ], [ 14.791553580912913, 40.769025509854309 ], [ 14.791492217189859, 40.768998482588039 ], [ 14.791522246245817, 40.768951679247266 ], [ 14.791375582595681, 40.768887407000264 ], [ 14.791272004112795, 40.769014962629761 ], [ 14.791203241926679, 40.768984968950782 ], [ 14.791196605070105, 40.768991643369532 ], [ 14.79119442905156, 40.768993373774272 ], [ 14.79119094742188, 40.768994362576983 ], [ 14.791187139389422, 40.76899469217787 ], [ 14.791181808143984, 40.76899485697831 ], [ 14.791176259296682, 40.768994115376287 ], [ 14.791167990426199, 40.768990984167708 ], [ 14.791163420787246, 40.768986204954288 ], [ 14.791161027166845, 40.768980931339122 ], [ 14.791160591963134, 40.76897747052891 ], [ 14.791161679972408, 40.768972691314538 ], [ 14.791162550379831, 40.768969724905453 ], [ 14.790900340144791, 40.768857660464889 ], [ 14.790865523848021, 40.768906771081227 ], [ 14.790781964735775, 40.768873810940036 ], [ 14.790840717236575, 40.768787455292596 ], [ 14.790798067273034, 40.768769656786446 ], [ 14.790845504477383, 40.768704065954033 ], [ 14.790761074957722, 40.768669457699779 ], [ 14.790695359197574, 40.768758779919203 ], [ 14.79057578697836, 40.76870991639521 ] ] ] ] } }
    ]
};
var bus = {
    "type": "FeatureCollection",
    "name": "busUnisa",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "Point", "coordinates": [ 14.793393186993432, 40.773411938932298 ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "Point", "coordinates": [ 14.793299182992158, 40.773742835407283 ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "Point", "coordinates": [ 14.793530711365666, 40.773848300072906 ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "Point", "coordinates": [ 14.794250538301348, 40.771371813705905 ] } },
        { "type": "Feature", "properties": { "id": null }, "geometry": { "type": "Point", "coordinates": [ 14.792977132247062, 40.767112067603705 ] } }
    ]
};

var giardino= {
    "type": "FeatureCollection",
    "name": "giardino",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
        { "type": "Feature", "properties": { "id": 5 }, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ [ 14.790083065102856, 40.770279830583632 ], [ 14.790625605464049, 40.770796673638706 ], [ 14.791842546645277, 40.770064954568454 ], [ 14.791299251357804, 40.769546676477958 ], [ 14.790083065102856, 40.770279830583632 ] ] ] ] } }
    ]
};

var strutture = {
    "type": "FeatureCollection",
    "name": "StruttureDiServizio",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
        { "type": "Feature", "properties": { "id": null, "Nome": "NULLBaby Point di Ateneo - Nursery", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.793603227704585, 40.77069156419217 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Biblioteca centrale del Polo Umanistico \"E. R. Caianiello\"", "Tipologia": "Biblioteca" }, "geometry": { "type": "Point", "coordinates": [ 14.791062240398317, 40.76905822752358 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Biblioteca del Polo Scientifico", "Tipologia": "Biblioteca" }, "geometry": { "type": "Point", "coordinates": [ 14.788812332355423, 40.772444100768546 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Cappella", "Tipologia": "Cappella" }, "geometry": { "type": "Point", "coordinates": [ 14.790689327463035, 40.771813381201554 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Centro di Ateneo per l'Orientamento e il Tutorato (CAOT)\n", "Tipologia": "INFO" }, "geometry": { "type": "Point", "coordinates": [ 14.792413013919466, 40.768756973723889 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Centro Stampa d'Ateneo", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.79208982270889, 40.77030716099992 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Bancomat Unicredit", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.789626525597473, 40.769307702292622 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Internet Point Segreterie Studenti", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.792434767174036, 40.769992576324697 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Mensa", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.793802114603414, 40.772934394803286 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Posto di Polizia", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.789471145207767, 40.769299072677882 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Presidio Sanitario Polispecialistico dell'Università di Salerno", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.789626525597471, 40.769144523933285 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Residenze", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.794364591614137, 40.772339765731097 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Teatro di Ateneo “Filippo Alison”", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.792317713947121, 40.769349281329767 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Terminal Bus", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.793403304936515, 40.773640411857173 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Ufficio Postale", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.789492898462333, 40.7691515845437 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Ufficio Diritto allo Studio", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.79170965868876, 40.768520833722974 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Ufficio Internazionalizzazione", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.79154184786788, 40.768847193104065 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Ufficio Relazioni con il Pubblico", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.792103289009338, 40.768635373496011 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": "Aula Magna", "Tipologia": null }, "geometry": { "type": "Point", "coordinates": [ 14.792264884614633, 40.769554822602771 ] } }
    ]
};

var parcheggi = {
    "type": "FeatureCollection",
    "name": "parcheggiUnisa",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.789953657707393, 40.772045239100912 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.789427715965772, 40.772793541542839 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.790462126301454, 40.772650630321714 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.793537400272408, 40.77174022569676 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.794182159417453, 40.770988603175667 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.793346942963977, 40.770954197715916 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.793028931678347, 40.771359122382442 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.793878126649869, 40.769628250655799 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.792945060570046, 40.768585471307922 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.791466832286284, 40.768304923816807 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.789689813179207, 40.768888514201109 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.78999209863203, 40.7710349181895 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.790783632216602, 40.770913175798313 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.789474893464188, 40.771106375576096 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.789153387549044, 40.770918468950391 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.789733496048111, 40.770907882645808 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.789308898562348, 40.770848334651099 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.79245231780879, 40.772221894813995 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.791777854312883, 40.773656295348353 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.789892501690916, 40.775074786454915 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.787488196586356, 40.775429404499413 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.787949487681997, 40.774788973519087 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.787089808821937, 40.774439644927718 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.787096798080961, 40.775148885904244 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.788452714331791, 40.774153829259483 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.787739809911253, 40.77365629534836 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.787488196586356, 40.774598430878761 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.78809626212152, 40.773788618560751 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.788110240639572, 40.773100534978468 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.788445725072767, 40.773259324129953 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.786785776054353, 40.773685406477703 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.794351648948799, 40.773248738198333 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.791632827188113, 40.773076716573016 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.792230408834742, 40.773309607282144 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.791681752001288, 40.774061203547639 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.788730537378033, 40.770767613950845 ] } },
        { "type": "Feature", "properties": { "id": null, "Nome": null, "Capacit ": null, "Tipo": null, "Target": null }, "geometry": { "type": "Point", "coordinates": [ 14.793102318898097, 40.767199925716703 ] } }
    ]
};
var confine ={
    "type": "FeatureCollection",
    "name": "ConfineUnisa",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
        { "type": "Feature", "properties": { "addr:city": "Fisciano", "addr:postcode": "84084", "addr:street": "Via Giovanni Paolo II", "amenity": "university", "name": "UNISA - Università degli studi di Salerno - Campus di Fisciano", "website": "https://unisa.it", "wikidata": "Q1633215", "wikipedia": "it:Università degli Studi di Salerno" }, "geometry": { "type": "Polygon", "coordinates": [ [ [ 14.7866723, 40.7752535 ], [ 14.786341, 40.7747426 ], [ 14.7858489, 40.7740084 ], [ 14.7857536, 40.7738306 ], [ 14.7857469, 40.7736935 ], [ 14.7857563, 40.7735991 ], [ 14.7858033, 40.7734985 ], [ 14.7862244, 40.7729277 ], [ 14.7863598, 40.7727398 ], [ 14.7864161, 40.7726566 ], [ 14.7867836, 40.772162 ], [ 14.787725, 40.7708832 ], [ 14.7886196, 40.7696604 ], [ 14.7887912, 40.7694684 ], [ 14.7896697, 40.7686214 ], [ 14.7902517, 40.7680901 ], [ 14.7903536, 40.7680211 ], [ 14.7904435, 40.7679805 ], [ 14.7906111, 40.7679439 ], [ 14.7908927, 40.7679022 ], [ 14.7911006, 40.7678738 ], [ 14.7918335, 40.7678728 ], [ 14.7920488, 40.767885 ], [ 14.7921212, 40.7676798 ], [ 14.7923411, 40.7676595 ], [ 14.7924846, 40.7676554 ], [ 14.7927273, 40.7676738 ], [ 14.7927931, 40.7676788 ], [ 14.7930184, 40.7677235 ], [ 14.7931539, 40.7677621 ], [ 14.7933497, 40.7678423 ], [ 14.7935589, 40.7679683 ], [ 14.7936916, 40.7680942 ], [ 14.7938593, 40.7683441 ], [ 14.7939639, 40.7685249 ], [ 14.7943125, 40.7691028 ], [ 14.7946653, 40.7696634 ], [ 14.7947202, 40.7697356 ], [ 14.794845, 40.7698483 ], [ 14.7949348, 40.7699082 ], [ 14.7951628, 40.7700128 ], [ 14.795313, 40.77009 ], [ 14.7954082, 40.7701479 ], [ 14.7955115, 40.7702525 ], [ 14.7955303, 40.7702952 ], [ 14.7955517, 40.7703785 ], [ 14.7956, 40.7707167 ], [ 14.795655, 40.771255 ], [ 14.7956362, 40.7714744 ], [ 14.7955947, 40.7716846 ], [ 14.7955102, 40.7719182 ], [ 14.795415, 40.772098 ], [ 14.7949201, 40.772812 ], [ 14.7945325, 40.7733269 ], [ 14.7943179, 40.7736346 ], [ 14.7940125, 40.7735213 ], [ 14.7939585, 40.7735016 ], [ 14.7938928, 40.7735879 ], [ 14.7939397, 40.7736077 ], [ 14.7939599, 40.7736448 ], [ 14.7937788, 40.7738895 ], [ 14.7928172, 40.7740195 ], [ 14.7927006, 40.7740541 ], [ 14.79249, 40.7741333 ], [ 14.7924726, 40.7741048 ], [ 14.7921373, 40.7741851 ], [ 14.7920032, 40.7742602 ], [ 14.7918047, 40.7744217 ], [ 14.7915982, 40.7745933 ], [ 14.7915235, 40.774641 ], [ 14.791275, 40.7747995 ], [ 14.7909705, 40.7749437 ], [ 14.7906859, 40.7750515 ], [ 14.7905575, 40.7751001 ], [ 14.7901203, 40.7751834 ], [ 14.7901015, 40.7751966 ], [ 14.7900318, 40.7751732 ], [ 14.7899821, 40.7752474 ], [ 14.7899506, 40.7752367 ], [ 14.7898259, 40.7753931 ], [ 14.7897837, 40.775418 ], [ 14.78973, 40.775419 ], [ 14.7894993, 40.7756292 ], [ 14.7893418, 40.7757471 ], [ 14.7892499, 40.7757633 ], [ 14.7891111, 40.7757877 ], [ 14.7891171, 40.7758831 ], [ 14.7887135, 40.7761807 ], [ 14.7886236, 40.7762284 ], [ 14.7885016, 40.7762335 ], [ 14.7883782, 40.7762091 ], [ 14.7880161, 40.7760558 ], [ 14.78754, 40.7758557 ], [ 14.7871202, 40.7756729 ], [ 14.7868916, 40.7755805 ], [ 14.7866723, 40.7752535 ] ], [ ] ] } }
    ]
};
const piazzeIcon = L.divIcon({
    className: 'custom-icon',
    html: '<div style="background-color: green; border-radius: 50%; width: 10px; height: 10px;"></div>'
});

function Mappa(){
    let piazzeLayerRef = useRef(null);
    const mapRef = useRef(null);
    const latitude = 40.772921;
    const longitude = 14.790703;
    const position = [40.764753, 14.792275]
    const [markers, setMarkers] = useState([40.764753, 14.792275]);

    const [route, setRoute] = useState([]);

    const [showGeoJSONLayer1, setShowGeoJSONLayer1] = useState(false);
    const [showGeoJSONLayer2, setShowGeoJSONLayer2] = useState(false);
    const [showGeoJSONLayer3, setShowGeoJSONLayer3] = useState(false);
    const [showGeoJSONLayer4, setShowGeoJSONLayer4] = useState(false);
    const [showGeoJSONLayer5, setShowGeoJSONLayer5] = useState(false);


    const handleCheckboxChange1 = () => {
        setShowGeoJSONLayer1(!showGeoJSONLayer1);
    };
    const handleCheckboxChange2 = () => {
        setShowGeoJSONLayer2(!showGeoJSONLayer2);
    };
    const handleBusButtonClick = () => {
        // Gestisci la logica per mostrare/nascondere il layer del bus
        setShowGeoJSONLayer2(!showGeoJSONLayer2);
    };
    const [selectedValue, setSelectedValue] = useState(null);
    const handleSelectChange = (event) => {
        setSelectedValue(event.target.value)
    };
    const handleCheckboxChange3 = () => {
        setShowGeoJSONLayer3(!showGeoJSONLayer3);
    };
    const handleCheckboxChange4 = () => {
        setShowGeoJSONLayer4(!showGeoJSONLayer4);
    };
    const handleCheckboxChange5 = () => {
        setShowGeoJSONLayer5(!showGeoJSONLayer5);
    };

    useEffect(() => {
        // Esempio: Aggiornare il layer GeoJSON quando showGeoJSONLayer1 cambia
        if (piazzeLayerRef.current) {
            const map = mapRef.current;
            if (showGeoJSONLayer1) {
                piazzeLayerRef.current.addTo(map);
            } else {
                map.removeLayer(piazzeLayerRef.current);
            }
        }
    }, [showGeoJSONLayer1]);

    const redirectToPage = (nome) => {
        // Costruisci l'URL della pagina aggiungendo il parametro del nome
        const url = `/SimpleMap?nome=${encodeURIComponent(nome)}`; // Codifica il nome per gestire caratteri speciali

        // Reindirizza l'utente alla nuova pagina
        window.location.href = url;
    }
    const onEachFeature = (feature, layer) => {
        if (feature.properties) {
            const nome = feature.properties.Nome;
            let popupContent = `<p>Edificio: ${nome}</a></p>`;
            const fotoUrl = feature.properties.FotoUrl; // Sostituisci con la URL della tua proprietà immagine


            if (fotoUrl) {
                popupContent += `<img src="${fotoUrl}" alt="Foto" width="200" height="200" marginBottom = "5px" style={{border-radius:"2px"}}>`; // Aggiungi l'immagine se disponibile
                popupContent += `<p></p>`;
                popupContent += `<button style="background-color: green; color: white;" onclick="window.location.href='/SimpleMap?nome=${encodeURIComponent(nome)}'">Scopri la pagina navigazione</button>`;
            }
            layer.bindPopup(popupContent);
        }
    };

    // Creazione delle coordinate dei vertici
    const topleft = L.latLng(40.52256691873593, -3.7743186950683594);
    const topright = L.latLng(40.5210255066156, -3.7734764814376835);
    const bottomleft = L.latLng(40.52180437272552, -3.7768453359603886);




    return (
        <div style={{ height: '100vh', width: '100%'}} className="Map">
            <Navbar />
            <div style={{ height: 'calc(100vh - 64px)', width: '100%', marginTop:'5px'}}>
                <div style={{ position: 'absolute', top: 10, right: 10, zIndex: 999 }}>
                    {/* Il tuo div sovrapposto */}
                    <div style={{ backgroundColor: 'beige', padding: 10, borderRadius: 10, marginTop: '100px', marginRight:'20px'}}>
                        <label style={{ display: 'block', marginBottom: 5 }}>
                            <span style={{ color: '#333', marginRight: 5 }}>Mostra Piazze</span>
                            <input type="checkbox" checked={showGeoJSONLayer1} onChange={handleCheckboxChange1} />
                        </label>
                        <label style={{ display: 'block', marginBottom: 5 }}>
                            <span style={{ color: '#333', marginRight: 5 }}>Mostra Bus</span>
                            <input type="checkbox" checked={showGeoJSONLayer2} onChange={handleCheckboxChange2} />
                        </label>
                        <label style={{ display: 'block', marginBottom: 5 }}>
                            <span style={{ color: '#333', marginRight: 5 }}>Mostra Edifici</span>
                            <input type="checkbox" checked={showGeoJSONLayer3} onChange={handleCheckboxChange3} />
                        </label>
                        <label style={{ display: 'block', marginBottom: 5 }}>
                            <span style={{ color: '#333', marginRight: 5 }}>Mostra Strutture di servizio </span>
                            <input type="checkbox" checked={showGeoJSONLayer4} onChange={handleCheckboxChange4} />
                        </label>
                        <label style={{ display: 'block', marginBottom: 5 }}>
                            <span style={{ color: '#333', marginRight: 5 }}>Mostra Parcheggi</span>
                            <input type="checkbox" checked={showGeoJSONLayer5} onChange={handleCheckboxChange5} />
                        </label>

                    </div>

                </div>
                <MapContainer center={[latitude, longitude]}
                              zoom={20} ref={mapRef} style={{height: 'calc(100vh - 64px)', width: "100vw"}}>

                    <TileLayer
                        attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                        url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
                    />

                    {showGeoJSONLayer1 && <GeoJSON data={piazze} ref={piazzeLayerRef} style={(feature) => ({ color: 'red' })}  pointToLayer={(feature, latlng) => {
                        return L.marker(latlng, {
                          piazzeIcon
                        });
                    }} onEachFeature={onEachFeature}
                    />};
                    {showGeoJSONLayer2 && <GeoJSON key="bus-layer" data={bus}   pointToLayer={(feature, latlng) => {
                        return L.circleMarker(latlng, {
                            fillColor: '#3744d9', // Cambia il colore di riempimento
                            color: 'white',   // Cambia il colore del bordo
                            radius: 10,        // Cambia la dimensione del marker
                            weight: 2,         // Cambia la larghezza del bordo
                            opacity: 1,        // Cambia l'opacità
                            fillOpacity: 0.7   // Cambia l'opacità del riempimento
                        });
                    }} onEachFeature={onEachFeature}
                    />};
                    {showGeoJSONLayer3 && <GeoJSON data={edifici}  style={(feature) => ({ color: '#CC46FA' })} pointToLayer={(feature, latlng) => {
                        return L.circleMarker(latlng, {
                            fill: '#abcdef',    // Imposta il colore del riempimento a rosso
                            color: 'white',      // Colore del bordo bianco
                            radius: 10,          // Dimensione del marker
                            weight: 2,           // Spessore del bordo
                            opacity: 1,          // Opacità
                            fillOpacity: 1     // Opacità del riempimento
                        });
                    }} onEachFeature={onEachFeature}
                    />};
                    {showGeoJSONLayer4 && <GeoJSON data={strutture}  style={(feature) => ({ color: 'green' })} pointToLayer={(feature, latlng) => {
                        return L.circleMarker(latlng, {
                            fill: 'red',    // Imposta il colore del riempimento a rosso
                            color: 'white',      // Colore del bordo bianco
                            radius: 10,          // Dimensione del marker
                            weight: 2,           // Spessore del bordo
                            opacity: 1,          // Opacità
                            fillOpacity: 0.7     // Opacità del riempimento
                        });
                    }} onEachFeature={onEachFeature}
                    />};
                    {showGeoJSONLayer5 && <GeoJSON data={parcheggi}  style={(feature) => ({ color: 'blue' })} pointToLayer={(feature, latlng) => {
                        return L.circleMarker(latlng, {
                            fill: 'red',    // Imposta il colore del riempimento a rosso
                            color: 'white',      // Colore del bordo bianco
                            radius: 10,          // Dimensione del marker
                            weight: 2,           // Spessore del bordo
                            opacity: 1,          // Opacità
                            fillOpacity: 0.7     // Opacità del riempimento
                        });
                    }} onEachFeature={onEachFeature}
                    />};

                    };
                </MapContainer>
            </div>

            <div>
            </div>

        </div>

    );


}
const MapEventsHandler = ({ handleMapClick }) => {
    useMapEvents({
        click: (e) => handleMapClick(e),
    });
    return null;
};

export default Mappa;
